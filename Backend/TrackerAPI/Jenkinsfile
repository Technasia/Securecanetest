pipeline {
     //agent { dockerfile { dir './Backend/TrackerAPI' } }
     agent {
    dockerfile {
        filename 'Dockerfile'
        dir './Backend/TrackerAPI'
        //label 'my-defined-label'
        registryUrl 'https://index.docker.io/v1/'
        registryCredentialsId 'Dockerhub'
    }
}

   stage('stuff not in docker') {
            steps {
                 sh 'docker push technasia/securecane:TrackerAPI'
            }
        }

    stage {
        stage('push after build') {
            steps {
             sh 'docker push technasia/securecane:TrackerAPI'
            }
        }
    }
}